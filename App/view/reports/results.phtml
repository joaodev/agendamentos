<?php $data = $this->view->data; ?>
<div class="card">
    <div class="card-body">
        <?php if ($_POST['sis_module'] == 1): ?>
            <div class="table-responsive">
                <table class="table table-bordered table-hover" id="table_schedules" style="width: 100%;">
                    <thead>
                        <tr class="text-center" style="height: 30px;">
                            <th style="font-size: 14px;">Data</th>
                            <th style="font-size: 14px;">Horário</th>
                            <th style="font-size: 14px;">Serviço</th>
                            <th style="font-size: 14px;">Cliente</th>
                            <th style="font-size: 14px;">Valor</th>
                            <th style="font-size: 14px;">Situação</th>
                            <th style="display: none;">Descrição</th>
                            <th style="display: none;">Forma de Pagamento</th>
                            <th style="display: none;">Situação</th>
                            <th style="display: none;">Cadastrado em</th>
                            <th style="display: none;">Atualizado em</th>
                        </tr>
                    </thead>
                    <tbody>
                        <?php foreach ($data as $entity): ?>
                            <tr class="text-center" style="cursor: pointer;" 
                                onclick="openModalDetails('<?php echo $entity['uuid']; ?>');">
                                <td style="font-size: 15px">
                                    <?php echo $this->formatDate($entity['schedule_date']); ?>
                                </td>
                                <td style="font-size: 15px">
                                    <?php echo substr($entity['schedule_time'], 0, 5); ?>
                                </td>
                                <td style="font-size: 15px">
                                    <?php echo $entity['serviceName']; ?>
                                </td> 
                                <td style="font-size: 15px">
                                    <?php echo $entity['customerName']; ?>
                                </td> 
                                <td style="font-size: 15px">
                                    <?php echo number_format($entity['amount'], 2, ",","."); ?>
                                </td> 
                                <td style="width: 80px;">
                                    <?php if ($entity['status'] == '1'): ?>
                                        <i class="fa fa-circle" style="color: orange;"></i>
                                    <?php endif; ?>
                                    <?php if ($entity['status'] == '2'): ?>
                                        <i class="fa fa-circle" style="color: green;"></i>
                                    <?php endif; ?>
                                    <?php if ($entity['status'] == '3'): ?>
                                        <i class="fa fa-circle" style="color: red;"></i>
                                    <?php endif; ?>
                                </td>  
                                <td style="display: none;">
                                    <?php echo ($entity['description']); ?>
                                </td> 
                                <td style="display: none;">
                                    <?php echo $entity['paymentTypeName']; ?>   
                                </td> 
                                <td style="display: none;">
                                    <?php echo ($entity['status'] == '1') ? 'Agendado' : ''; ?>
                                    <?php echo ($entity['status'] == '2') ? 'Concluído' : ''; ?>
                                    <?php echo ($entity['status'] == '3') ? 'Cancelado' : ''; ?>
                                </td> 
                                <td style="display: none;">
                                    <?php echo $this->formatDateTime($entity['created_at']); ?>
                                </td> 
                                <td style="display: none;">
                                    <?php echo $this->formatDateTime($entity['updated_at']); ?>
                                </td> 
                            </tr>
                        <?php endforeach; ?>
                    </tbody>
                </table>
            </div>
            <script type="text/javascript">
                $(document).ready(function() {
                    
                    let buttonCommon = {
                        exportOptions: {
                            format: {
                                body: function ( data, row, column ) {
                                    return  column === 4  ?
                                        parseFloat(data.replace(/[.]/g, '' ).replace( ',', '.' )).toLocaleString('en-IN',
                                        {minimumFractionDigits: 2 , maximumFractionDigits: 2}) : data;
                                }
                            }
                        }
                    };	

                    $('#table_schedules').DataTable({
                        "sDom": 'flBtip',
                        searching: true,
                        buttons: [
                            $.extend( true, {}, buttonCommon, {
                                extend: 'excel',
                                title: 'Relatório de Agendamentos',
                                exportOptions: {columns: [0,1,2,3,4,6,7,8,9,10]}
                            })
                        ],
                        order: [ [0, "<?php echo $this->view->orderType; ?>"] ],
                        columnDefs: [
                            {type: 'date-eu', targets: [0]},
                            {type: 'valoresemreais', targets: [4]},
                            {orderable: false, targets: [5]},
                        ],
                        responsive: true,
                        info: true,
                        processing: true,
                        scrollCollapse: true,
                        paging: true,
                        "pageLength": 10,
                        "language": {
                            "sEmptyTable": "Nenhum registro encontrado",
                            "sInfo": "Mostrando de _START_ até _END_ de _TOTAL_ registros",
                            "sInfoEmpty": "Mostrando 0 até 0 de 0 registros",
                            "sInfoFiltered": "(Filtrados de _MAX_ registros)",
                            "sInfoPostFix": "",
                            "sInfoThousands": ".",
                            "sLengthMenu": "_MENU_ &nbsp;",
                            "sLoadingRecords": "Carregando...",
                            "sProcessing": "Processando...",
                            "sZeroRecords": "Nenhum registro encontrado",
                            "sSearch": "Filtrar",
                            "oPaginate": {
                                "sNext": "Próximo",
                                "sPrevious": "Anterior",
                                "sFirst": "Primeiro",
                                "sLast": "Último"
                            },
                            "oAria": {
                                "sSortAscending": ": Ordenar colunas de forma ascendente",
                                "sSortDescending": ": Ordenar colunas de forma descendente"
                            }
                        }
                    });
                });
            </script>
        <?php endif; ?>
        <?php if ($_POST['sis_module'] == 2): ?>
            <div class="table-responsive">
                <table class="table table-bordered table-hover" id="table_customers" style="width: 100%;">
                    <thead>
                        <tr class="text-center" style="height: 30px;">
                            <th style="font-size: 14px;">Data</th>
                            <th style="font-size: 14px;">Nome</th>
                            <th style="font-size: 14px;">Email</th>
                            <th style="font-size: 14px;">Celular</th>
                            <th style="font-size: 14px;">Situação</th>
                            <th style="display: none;">Telefone</th>
                            <th style="display: none;">CPF</th>
                            <th style="display: none;">CNPJ</th>
                            <th style="display: none;">CEP</th>
                            <th style="display: none;">Endereço</th>
                            <th style="display: none;">Número</th>
                            <th style="display: none;">Complemento</th>
                            <th style="display: none;">Bairro</th>
                            <th style="display: none;">Cidade</th>
                            <th style="display: none;">UF</th>
                            <th style="display: none;">Situação</th>
                            <th style="display: none;">Atualizado em</th>
                        </tr>
                    </thead>
                    <tbody>
                        <?php foreach ($data as $entity): ?>
                            <tr class="text-center" style="cursor: pointer;" 
                                onclick="openModalDetails('<?php echo $entity['uuid']; ?>');">
                                <td style="font-size: 15px">
                                    <?php echo $this->formatDateTime($entity['created_at'], false); ?>
                                </td> 
                                <td style="font-size: 15px">
                                    <?php echo $entity['name']; ?>
                                </td>
                                <td style="font-size: 15px">
                                    <?php echo ($entity['email']); ?>
                                </td>
                                <td style="font-size: 15px">
                                    <?php echo $entity['cellphone']; ?>
                                </td>
                                <td style="width: 80px;">
                                    <?php if ($entity['status'] == '1'): ?>
                                        <i class="fa fa-circle" style="color: green;"></i>
                                    <?php else: ?>
                                        <i class="fa fa-circle" style="color: red;"></i>
                                    <?php endif; ?>
                                </td>  
                                <td style="display: none;">
                                    <?php echo ($entity['phone']); ?>
                                </td>
                                <td style="display: none;">
                                    <?php echo ($entity['document_1']); ?>
                                </td>
                                <td style="display: none;">
                                    <?php echo ($entity['document_2']); ?>
                                </td>
                                <td style="display: none;">
                                    <?php echo ($entity['postal_code']); ?>
                                </td>
                                <td style="display: none;">
                                    <?php echo ($entity['address']); ?>
                                </td>
                                <td style="display: none;">
                                    <?php echo ($entity['number']); ?>
                                </td>
                                <td style="display: none;">
                                    <?php echo ($entity['complement']); ?>
                                </td>
                                <td style="display: none;">
                                    <?php echo ($entity['neighborhood']); ?>
                                </td>
                                <td style="display: none;">
                                    <?php echo ($entity['city']); ?>
                                </td>
                                <td style="display: none;">
                                    <?php echo ($entity['state']); ?>
                                </td>
                                <td style="display: none;">
                                    <?php echo ($entity['status'] == '1') ? 'Ativo' : 'Inativo'; ?>
                                </td> 
                                <td style="display: none;">
                                    <?php echo $this->formatDateTime($entity['updated_at']); ?>
                                </td> 
                            </tr>
                        <?php endforeach; ?>
                    </tbody>
                </table>
            </div>
            <script type="text/javascript">
                $(document).ready(function() {
                    let buttonCommon = {
                        exportOptions: {
                            format: {
                                body: function ( data ) {
                                    return data;
                                }
                            }
                        }
                    };	

                    $('#table_customers').DataTable({
                        "sDom": 'flBtip',
                        searching: true,
                        buttons: [
                            $.extend( true, {}, buttonCommon, {
                                extend: 'excel',
                                title: 'Relatório de Clientes',
                                exportOptions: {columns: [0,1,2,3,5,6,7,8,9,10,11,12,13,14,15,16]}
                            })
                        ],
                        order: [ [0, "<?php echo $this->view->orderType; ?>"] ], 
                        columnDefs: [{orderable: false, targets: [4]}],
                        responsive: true,
                        info: true,
                        processing: true,
                        scrollCollapse: true,
                        paging: true,
                        "pageLength": 10,
                        "language": {
                            "sEmptyTable": "Nenhum registro encontrado",
                            "sInfo": "Mostrando de _START_ até _END_ de _TOTAL_ registros",
                            "sInfoEmpty": "Mostrando 0 até 0 de 0 registros",
                            "sInfoFiltered": "(Filtrados de _MAX_ registros)",
                            "sInfoPostFix": "",
                            "sInfoThousands": ".",
                            "sLengthMenu": "_MENU_ &nbsp;",
                            "sLoadingRecords": "Carregando...",
                            "sProcessing": "Processando...",
                            "sZeroRecords": "Nenhum registro encontrado",
                            "sSearch": "Filtrar",
                            "oPaginate": {
                                "sNext": "Próximo",
                                "sPrevious": "Anterior",
                                "sFirst": "Primeiro",
                                "sLast": "Último"
                            },
                            "oAria": {
                                "sSortAscending": ": Ordenar colunas de forma ascendente",
                                "sSortDescending": ": Ordenar colunas de forma descendente"
                            }
                        }
                    });
                });
            </script>   
        <?php endif; ?>
        <?php if ($_POST['sis_module'] == 3): ?>
            <div class="table-responsive">
                <table class="table table-bordered table-hover" id="table_expenses" style="width: 100%;">
                    <thead>
                        <tr class="text-center" style="height: 30px;">
                            <th style="font-size: 14px;">Data</th>
                            <th style="font-size: 14px;">Despesa</th>
                            <th style="font-size: 14px;">Valor</th>
                            <th style="font-size: 14px;">Situação</th>
                            <th style="display: none;">Descrição</th>
                            <th style="display: none;">Forma de Pagamento</th>
                            <th style="display: none;">Cliente</th>
                            <th style="display: none;">Situação</th>
                            <th style="display: none;">Cadastrado em</th>
                            <th style="display: none;">Atualizado em</th>
                        </tr>
                    </thead>
                    <tbody>
                        <?php foreach ($data as $entity): ?>
                            <tr class="text-center" style="cursor: pointer;" 
                                onclick="openModalDetails('<?php echo $entity['uuid']; ?>');">
                                <td style="font-size: 15px">
                                    <?php echo $this->formatDate($entity['expense_date']); ?>
                                </td>
                                <td style="font-size: 15px">
                                    <?php echo $entity['title']; ?>
                                </td> 
                                <td style="font-size: 15px; color: red;">
                                    <?php echo number_format($entity['amount'], 2, ",","."); ?>
                                </td> 
                                <td style="width: 80px;">
                                    <?php if ($entity['status'] == '1'): ?>
                                        <i class="fa fa-circle" style="color: orange;"></i>
                                    <?php endif; ?>
                                    <?php if ($entity['status'] == '2'): ?>
                                        <i class="fa fa-circle" style="color: green;"></i>
                                    <?php endif; ?>
                                    <?php if ($entity['status'] == '3'): ?>
                                        <i class="fa fa-circle" style="color: red;"></i>
                                    <?php endif; ?>
                                </td>  
                                <td style="display: none;">
                                    <?php echo $entity['description']; ?>
                                </td> 
                                <td style="display: none;">
                                    <?php echo $entity['paymentTypeName']; ?>   
                                </td> 
                                <td style="display: none;">
                                    <?php echo $entity['customerName']; ?>
                                </td>
                                <td style="display: none;">
                                    <?php echo ($entity['status'] == '1') ? 'Pendente' : ''; ?>
                                    <?php echo ($entity['status'] == '2') ? 'Concluída' : ''; ?>
                                    <?php echo ($entity['status'] == '3') ? 'Cancelada' : ''; ?>
                                </td> 
                                <td style="display: none;">
                                    <?php echo $this->formatDateTime($entity['created_at']); ?>
                                </td> 
                                <td style="display: none;">
                                    <?php echo $this->formatDateTime($entity['updated_at']); ?>
                                </td> 
                            </tr>
                        <?php endforeach; ?>
                    </tbody>
                </table>
            </div>
            <script>
                $(document).ready(function() {
                    let buttonCommon = {
                        exportOptions: {
                            format: {
                                body: function ( data, row, column ) {
                                    return  column === 2  ?
                                        parseFloat(data.replace(/[.]/g, '' ).replace( ',', '.' )).toLocaleString('en-IN',
                                        {minimumFractionDigits: 2 , maximumFractionDigits: 2}) : data;
                                }
                            }
                        }
                    };	

                    $('#table_expenses').DataTable({
                        "sDom": 'flBtip',
                        searching: true,
                        buttons: [
                            $.extend( true, {}, buttonCommon, {
                                extend: 'excel',
                                title: 'Relatório de Despesas',
                                exportOptions: {columns: [0,1,2,4,5,6,7,8,9]}
                            })
                        ],
                        order: [ [0, "<?php echo $this->view->orderType; ?>"] ], 
                        columnDefs: [
                            {type: 'date-eu', targets: [0]},
                            {type: 'valoresemreais', targets: [2]},
                            {orderable: false, targets: [3]},
                        ],
                        responsive: true,
                        info: true,
                        processing: true,
                        scrollCollapse: true,
                        paging: true,
                        "pageLength": 10,
                        "language": {
                            "sEmptyTable": "Nenhum registro encontrado",
                            "sInfo": "Mostrando de _START_ até _END_ de _TOTAL_ registros",
                            "sInfoEmpty": "Mostrando 0 até 0 de 0 registros",
                            "sInfoFiltered": "(Filtrados de _MAX_ registros)",
                            "sInfoPostFix": "",
                            "sInfoThousands": ".",
                            "sLengthMenu": "_MENU_ &nbsp;",
                            "sLoadingRecords": "Carregando...",
                            "sProcessing": "Processando...",
                            "sZeroRecords": "Nenhum registro encontrado",
                            "sSearch": "Filtrar",
                            "oPaginate": {
                                "sNext": "Próximo",
                                "sPrevious": "Anterior",
                                "sFirst": "Primeiro",
                                "sLast": "Último"
                            },
                            "oAria": {
                                "sSortAscending": ": Ordenar colunas de forma ascendente",
                                "sSortDescending": ": Ordenar colunas de forma descendente"
                            }
                        }
                    });
                });
            </script>
        <?php endif; ?>
        <?php if ($_POST['sis_module'] == 4): ?>
            <div class="table-responsive">
                <table class="table table-bordered table-hover" id="table_revenues" style="width: 100%;">
                    <thead>
                        <tr class="text-center" style="height: 30px;">
                            <th style="font-size: 14px;">Data</th>
                            <th style="font-size: 14px;">Receita</th>
                            <th style="font-size: 14px;">Valor</th>
                            <th style="font-size: 14px;">Situação</th>
                            <th style="display: none;">Descrição</th>
                            <th style="display: none;">Forma de Pagamento</th>
                            <th style="display: none;">Cliente</th>
                            <th style="display: none;">Situação</th>
                            <th style="display: none;">Cadastrado em</th>
                            <th style="display: none;">Atualizado em</th>
                        </tr>
                    </thead>
                    <tbody>
                        <?php foreach ($data as $entity): ?>
                            <tr class="text-center" style="cursor: pointer;" 
                                onclick="openModalDetails('<?php echo $entity['uuid']; ?>');">
                                <td style="font-size: 15px">
                                    <?php echo $this->formatDate($entity['revenue_date']); ?>
                                </td>
                                <td style="font-size: 15px">
                                    <?php echo $entity['title']; ?>
                                </td> 
                                <td style="font-size: 15px; color: green;">
                                    <?php echo number_format($entity['amount'], 2, ",","."); ?>
                                </td> 
                                <td style="width: 80px;">
                                    <?php if ($entity['status'] == '1'): ?>
                                        <i class="fa fa-circle" style="color: orange;"></i>
                                    <?php endif; ?>
                                    <?php if ($entity['status'] == '2'): ?>
                                        <i class="fa fa-circle" style="color: green;"></i>
                                    <?php endif; ?>
                                    <?php if ($entity['status'] == '3'): ?>
                                        <i class="fa fa-circle" style="color: red;"></i>
                                    <?php endif; ?>
                                </td>  
                                <td style="display: none;">
                                    <?php echo $entity['description']; ?>
                                </td> 
                                <td style="display: none;">
                                    <?php echo $entity['paymentTypeName']; ?>   
                                </td> 
                                <td style="display: none;">
                                    <?php echo $entity['customerName']; ?>
                                </td>
                                <td style="display: none;">
                                    <?php echo ($entity['status'] == '1') ? 'Pendente' : ''; ?>
                                    <?php echo ($entity['status'] == '2') ? 'Concluída' : ''; ?>
                                    <?php echo ($entity['status'] == '3') ? 'Cancelada' : ''; ?>
                                </td> 
                                <td style="display: none;">
                                    <?php echo $this->formatDateTime($entity['created_at']); ?>
                                </td> 
                                <td style="display: none;">
                                    <?php echo $this->formatDateTime($entity['updated_at']); ?>
                                </td> 
                            </tr>
                        <?php endforeach; ?>
                    </tbody>
                </table>
            </div>
            <script>
                $(document).ready(function() {
                    let buttonCommon = {
                        exportOptions: {
                            format: {
                                body: function ( data, row, column ) {
                                    return  column === 2  ?
                                        parseFloat(data.replace(/[.]/g, '' ).replace( ',', '.' )).toLocaleString('en-IN',
                                        {minimumFractionDigits: 2 , maximumFractionDigits: 2}) : data;
                                }
                            }
                        }
                    };	

                    $('#table_revenues').DataTable({
                        "sDom": 'flBtip',
                        searching: true,
                        buttons: [
                            $.extend( true, {}, buttonCommon, {
                                extend: 'excel',
                                title: 'Relatório de Receitas',
                                exportOptions: {columns: [0,1,2,4,5,6,7,8,9]}
                            })
                        ],
                        order: [ [0, "<?php echo $this->view->orderType; ?>"] ], 
                        columnDefs: [
                            {type: 'date-eu', targets: [0]},
                            {type: 'valoresemreais', targets: [2]},
                            {orderable: false, targets: [3]},
                        ],
                        responsive: true,
                        info: true,
                        processing: true,
                        scrollCollapse: true,
                        paging: true,
                        "pageLength": 10,
                        "language": {
                            "sEmptyTable": "Nenhum registro encontrado",
                            "sInfo": "Mostrando de _START_ até _END_ de _TOTAL_ registros",
                            "sInfoEmpty": "Mostrando 0 até 0 de 0 registros",
                            "sInfoFiltered": "(Filtrados de _MAX_ registros)",
                            "sInfoPostFix": "",
                            "sInfoThousands": ".",
                            "sLengthMenu": "_MENU_ &nbsp;",
                            "sLoadingRecords": "Carregando...",
                            "sProcessing": "Processando...",
                            "sZeroRecords": "Nenhum registro encontrado",
                            "sSearch": "Filtrar",
                            "oPaginate": {
                                "sNext": "Próximo",
                                "sPrevious": "Anterior",
                                "sFirst": "Primeiro",
                                "sLast": "Último"
                            },
                            "oAria": {
                                "sSortAscending": ": Ordenar colunas de forma ascendente",
                                "sSortDescending": ": Ordenar colunas de forma descendente"
                            }
                        }
                    });
                });
            </script>
        <?php endif; ?>
        <?php if ($_POST['sis_module'] == 5): ?>
            <div class="table-responsive">
                <table class="table table-bordered table-hover" id="table_services" style="width: 100%;">
                    <thead>
                        <tr class="text-center" style="height: 30px;">
                            <th style="font-size: 14px;">Data</th>
                            <th style="font-size: 14px;">Serviço</th>
                            <th style="font-size: 14px;">Descrição</th>
                            <th style="font-size: 14px;">Valor</th>
                            <th style="font-size: 14px;">Situação</th>
                            <th style="display: none;">Situação</th>
                            <th style="display: none;">Atualizado em</th>
                        </tr>
                    </thead>
                    <tbody>
                        <?php foreach ($data as $entity): ?>
                            <tr class="text-center" style="cursor: pointer;"
                                onclick="openModalDetails('<?php echo $entity['uuid']; ?>');">
                                <td style="font-size: 15px">
                                    <?php echo $this->formatDateTime($entity['created_at'], false); ?>
                                </td>
                                <td style="font-size: 15px">
                                    <?php echo $entity['title']; ?>
                                </td>
                                <td style="font-size: 15px">
                                    <?php echo $entity['description']; ?>
                                </td>
                                <td style="font-size: 15px">
                                    <?php echo number_format($entity['price'], 2, ",","."); ?>
                                </td>
                                <td style="width: 80px;">
                                    <?php if ($entity['status'] == '1'): ?>
                                        <i class="fa fa-circle" style="color: green;"></i>
                                    <?php else: ?>
                                        <i class="fa fa-circle" style="color: red;"></i>
                                    <?php endif; ?>
                                </td>
                                <td style="display: none;">
                                    <?php echo ($entity['status'] == '1') ? 'Ativo' : 'Inativo'; ?>
                                </td>
                                <td style="display: none;">
                                    <?php echo $this->formatDateTime($entity['updated_at']); ?>
                                </td>
                            </tr>
                        <?php endforeach; ?>
                    </tbody>
                </table>
            </div>
            <script>
                $(document).ready(function() {
                    let buttonCommon = {
                        exportOptions: {
                            format: {
                                body: function ( data ) {
                                    return data;
                                }
                            }
                        }
                    };
                
                    $('#table_services').DataTable({
                        "sDom": 'flBtip',
                        searching: true,
                        buttons: [
                            $.extend( true, {}, buttonCommon, {
                                extend: 'excel',
                                title: 'Relatório de Serviços',
                                exportOptions: {columns: [0,1,2,3,5,6]}
                            })
                        ],
                        order: [ [0, "<?php echo $this->view->orderType; ?>"] ], 
                        columnDefs: [
                            {type: 'date-eu', targets: [0]},
                            {orderable: false, targets: [4]}
                        ],
                        info: true,
                        processing: true,
                        scrollCollapse: true,
                        paging: true,
                        "pageLength": 10,
                        "language": {
                            "sEmptyService": "Nenhum registro encontrado",
                            "sInfo": "Mostrando de _START_ até _END_ de _TOTAL_ registros",
                            "sInfoEmpty": "Mostrando 0 até 0 de 0 registros",
                            "sInfoFiltered": "(Filtrados de _MAX_ registros)",
                            "sInfoPostFix": "",
                            "sInfoThousands": ".",
                            "sLengthMenu": "_MENU_ &nbsp;",
                            "sLoadingRecords": "Carregando...",
                            "sProcessing": "Processando...",
                            "sZeroRecords": "Nenhum registro encontrado",
                            "sSearch": "Filtrar",
                            "oPaginate": {
                                "sNext": "Próximo",
                                "sPrevious": "Anterior",
                                "sFirst": "Primeiro",
                                "sLast": "Último"
                            },
                            "oAria": {
                                "sSortAscending": ": Ordenar colunas de forma ascendente",
                                "sSortDescending": ": Ordenar colunas de forma descendente"
                            }
                        }
                    });
                });
            </script>
        <?php endif; ?>
        <?php if ($_POST['sis_module'] == 6): ?>
            <div class="table-responsive">
                <table class="table table-bordered table-hover" id="table_tasks" style="width: 100%;">
                    <thead>
                        <tr class="text-center" style="height: 30px;">
                            <th style="font-size: 14px;">Data</th>
                            <th style="font-size: 14px;">Horário</th>
                            <th style="font-size: 14px;">Tarefa</th>
                            <th style="font-size: 14px;">Descrição</th>
                            <th style="font-size: 14px;">Situação</th>
                            <th style="display: none;">Situação</th>
                            <th style="display: none;">Cadastrado em</th>
                            <th style="display: none;">Atualizado em</th>
                        </tr>
                    </thead>
                    <tbody>
                        <?php foreach ($data as $entity): ?>
                            <tr class="text-center" style="cursor: pointer;" 
                                onclick="openModalDetails('<?php echo $entity['uuid']; ?>');">
                                <td style="font-size: 15px">
                                    <?php echo $this->formatDate($entity['task_date']); ?>
                                </td>
                                <td style="font-size: 15px">
                                    <?php echo substr($entity['task_time'], 0, 5); ?>
                                </td>
                                <td style="font-size: 15px">
                                    <?php echo $entity['title']; ?>
                                </td>
                                <td style="font-size: 15px">
                                    <?php echo $entity['description']; ?>
                                </td>
                                <td style="width: 80px;">
                                    <?php if ($entity['status'] == '1'): ?>
                                            <i class="fa fa-circle pr-1" style="color: orange;"></i> 
                                    <?php endif; ?>
                                    <?php if ($entity['status'] == '2'): ?>
                                            <i class="fa fa-circle pr-1" style="color: green;"></i> 
                                    <?php endif; ?>
                                    <?php if ($entity['status'] == '3'): ?>
                                            <i class="fa fa-circle pr-1" style="color: red;"></i> 
                                    <?php endif; ?>
                                </td>
                                <td style="display: none;">
                                    <?php if ($entity['status'] == '1'): ?>
                                            Pendente
                                    <?php endif; ?>
                                    <?php if ($entity['status'] == '2'): ?>
                                            Concluída
                                    <?php endif; ?>
                                    <?php if ($entity['status'] == '3'): ?>
                                            Cancelada
                                    <?php endif; ?>
                                </td>
                                <td style="display: none;">
                                    <?php echo $this->formatDateTime($entity['created_at']); ?>
                                </td>
                                <td style="display: none;">
                                    <?php echo $this->formatDateTime($entity['updated_at']); ?>
                                </td>
                            </tr>
                        <?php endforeach; ?>
                    </tbody>
                </table>
            </div>
            <script>
                $(document).ready(function() {
                    let buttonCommon = {
                        exportOptions: {
                            format: {
                                body: function ( data ) {
                                    return data;
                                }
                            }
                        }
                    };
                
                    $('#table_tasks').DataTable({
                        "sDom": 'flBtip',
                        searching: true,
                        buttons: [
                            $.extend( true, {}, buttonCommon, {
                                extend: 'excel',
                                title: 'Relatório de Tarefas',
                                exportOptions: {columns: [0,1,2,3,5,6,7]}
                            })
                        ],
                        order: [ [0, "<?php echo $this->view->orderType; ?>"] ], 
                        columnDefs: [
                            {type: 'date-eu', targets: [0]},
                            {orderable: false, targets: [4]}
                        ],
                        responsive: true,
                        info: true,
                        processing: true,
                        scrollCollapse: true,
                        paging: true,
                        "pageLength": 10,
                        "language": {
                            "sEmptyTask": "Nenhum registro encontrado",
                            "sInfo": "Mostrando de _START_ até _END_ de _TOTAL_ registros",
                            "sInfoEmpty": "Mostrando 0 até 0 de 0 registros",
                            "sInfoFiltered": "(Filtrados de _MAX_ registros)",
                            "sInfoPostFix": "",
                            "sInfoThousands": ".",
                            "sLengthMenu": "_MENU_ &nbsp;",
                            "sLoadingRecords": "Carregando...",
                            "sProcessing": "Processando...",
                            "sZeroRecords": "Nenhum registro encontrado",
                            "sSearch": "Filtrar",
                            "oPaginate": {
                                "sNext": "Próximo",
                                "sPrevious": "Anterior",
                                "sFirst": "Primeiro",
                                "sLast": "Último"
                            },
                            "oAria": {
                                "sSortAscending": ": Ordenar colunas de forma ascendente",
                                "sSortDescending": ": Ordenar colunas de forma descendente"
                            }
                        }
                    });
                });
            </script>
        <?php endif; ?>
        <?php if ($_POST['sis_module'] == 7): ?>
            <div class="table-responsive">
                <table class="table table-bordered table-hover" id="table_users" style="width: 100%;">
                    <thead>
                        <tr class="text-center" style="height: 30px;">
                            <th style="font-size: 14px;">Data</th>
                            <th style="font-size: 14px;">Nome</th>
                            <th style="font-size: 14px;">Líder</th>
                            <th style="font-size: 14px;">Situação</th>
                            <th style="display: none;">Cargo</th>
                            <th style="display: none;">CPF</th>
                            <th style="display: none;">CNPJ</th>
                            <th style="display: none;">Email</th>
                            <th style="display: none;">Celular</th>
                            <th style="display: none;">Telefone</th>
                            <th style="display: none;">Whatsapp</th>
                            <th style="display: none;">CEP</th>
                            <th style="display: none;">Endereço</th>
                            <th style="display: none;">Número</th>
                            <th style="display: none;">Complemento</th>
                            <th style="display: none;">Bairro</th>
                            <th style="display: none;">Cidade</th>
                            <th style="display: none;">UF</th>
                            <th style="display: none;">Situação</th>
                            <th style="display: none;">Atualizado em</th>
                        </tr>
                    </thead>
                    <tbody>
                        <?php foreach ($data as $entity): ?>
                            <tr class="text-center" style="cursor: pointer;"
                                onclick="openModalDetails('<?php echo $entity['uuid']; ?>');">
                                <td style="font-size: 15px">
                                    <?php echo $this->formatDateTime($entity['created_at'], false); ?>
                                </td>
                                <td style="font-size: 15px; ">
                                    <?php echo $entity['name']; ?>
                                </td>
                                
                                <td style="font-size: 15px">
                                    <?php echo ($entity['uuid'] == $entity['parent_uuid']) ? 'Sim' : 'Não'; ?>
                                </td>
                                <td style="width: 80px;">
                                    <?php if ($entity['status'] == '1'): ?>
                                        <i class="fa fa-circle" style="color: green;"></i>
                                    <?php else: ?>
                                        <i class="fa fa-circle" style="color: red;"></i>
                                    <?php endif; ?>
                                </td>  
                                <td style="display: none;">
                                    <?php echo $entity['job_role']; ?>
                                </td>
                                <td style="display: none;">
                                    <?php echo $entity['document_1']; ?>
                                </td> 
                                <td style="display: none;">
                                    <?php echo $entity['document_2']; ?>
                                </td> 
                                <td style="display: none;">
                                    <?php echo $entity['email']; ?>
                                </td>
                                <td style="display: none;">
                                    <?php echo $entity['cellphone']; ?>
                                </td>
                                <td style="display: none;">
                                    <?php echo $entity['phone']; ?>
                                </td>  
                                <td style="display: none;">
                                    <?php echo $entity['whatsapp']; ?>
                                </td> 
                                <td style="display: none;">
                                    <?php echo $entity['postal_code']; ?>
                                </td> 
                                <td style="display: none;">
                                    <?php echo $entity['address']; ?>
                                </td> 
                                <td style="display: none;">
                                    <?php echo $entity['number']; ?>
                                </td> 
                                <td style="display: none;">
                                    <?php echo $entity['complement']; ?>
                                </td> 
                                <td style="display: none;">
                                    <?php echo $entity['neighborhood']; ?>
                                </td> 
                                <td style="display: none;">
                                    <?php echo $entity['city']; ?>
                                </td> 
                                <td style="display: none;">
                                    <?php echo $entity['state']; ?>
                                </td> 
                                <td style="display: none;">
                                    <?php echo ($entity['status'] == '1') ? 'Ativo' : 'Inativo'; ?>
                                </td> 
                                <td style="display: none;">
                                    <?php echo $this->formatDateTime($entity['updated_at']); ?>
                                </td> 
                            </tr>
                        <?php endforeach; ?>
                    </tbody>
                </table>
            </div>
            <script type="text/javascript">
                $(document).ready(function() {
                    let buttonCommon = {
                        exportOptions: {
                            format: {
                                body: function ( data ) {
                                    return data;
                                }
                            }
                        }
                    };	

                    $('#table_users').DataTable({
                        "sDom": 'flBtip',
                        searching: true,
                        buttons: [
                            $.extend( true, {}, buttonCommon, {
                                extend: 'excel',
                                title: 'Relatório de Usuários',
                                exportOptions: {columns: [0,1,2,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19]}
                            })
                        ],
                        order: [ [0, "<?php echo $this->view->orderType; ?>"] ], 
                        columnDefs: [
                            {type: 'date-eu', targets: [0]},
                            {orderable: false, targets: [3]}
                        ],
                        responsive: true,
                        info: true,
                        processing: true,
                        scrollCollapse: true,
                        paging: true,
                        "pageLength": 10,
                        "language": {
                            "sEmptyTable": "Nenhum registro encontrado",
                            "sInfo": "Mostrando de _START_ até _END_ de _TOTAL_ registros",
                            "sInfoEmpty": "Mostrando 0 até 0 de 0 registros",
                            "sInfoFiltered": "(Filtrados de _MAX_ registros)",
                            "sInfoPostFix": "",
                            "sInfoThousands": ".",
                            "sLengthMenu": "_MENU_ &nbsp;",
                            "sLoadingRecords": "Carregando...",
                            "sProcessing": "Processando...",
                            "sZeroRecords": "Nenhum registro encontrado",
                            "sSearch": "Filtrar",
                            "oPaginate": {
                                "sNext": "Próximo",
                                "sPrevious": "Anterior",
                                "sFirst": "Primeiro",
                                "sLast": "Último"
                            },
                            "oAria": {
                                "sSortAscending": ": Ordenar colunas de forma ascendente",
                                "sSortDescending": ": Ordenar colunas de forma descendente"
                            }
                        }
                    });
                });
            </script>
        <?php endif; ?>
    </div>
</div>
<script>
    function openModalDetails(uuid) {
        $("#modalReportDetailsTitle").html('<i class="fa fa-info-circle pr-2"></i> <?php echo $this->view->modalTitle; ?>');
        $("#modalReportDetailsLoader").show();
        $("#modalReportDetails").modal('show');     

        $.ajax({
            type: 'post',
            url: "<?php echo baseUrl . $this->view->module; ?>/detalhes",
            data: {
                uuid:uuid,
                modal: true
            },
            async: true
        }).done(function(data) {
            $("#modalReportDetailsResult").html(data);
            $("#modalReportDetailsLoader").hide();
        }).fail(function() {
            showInternalErrorAlert();
            $("#modalReportDetailsLoader").hide();
        });
    }

    function openModDetails(uuid, mod, month = null) {
        $("#modalReportDetailsLoader").show();
        
        $("#baseLoader").show();
        $.ajax({
            type: 'post',
            url: "<?php echo baseUrl; ?>"+mod+"/detalhes",
            data: {
                uuid:uuid,
                month: month
            },
            async: true
        }).done(function(data) {
            $("#sis_content").html(data);
            $("#baseLoader").hide();
            $("#modalReportDetails").modal('hide');  
        }).fail(function() {
            showInternalErrorAlert();
            $("#baseLoader").hide();
        });
    }
</script>