<?php if ($this->view->acl['canView']): ?>
    <?php $data = $this->view->data; ?>
    <div class="card">
        <div class="card-body cardWrapperList">
            <?php if (!$data): ?>
                <div class="alert alert-info mt-3" role="alert">
                    <i class="fas fa-info-circle pr-1"></i> Nenhuma informação até o momento.
                </div>
            <?php else: ?>
                <?php if ($_POST['sis_module'] == 1): ?>
                    <?php include('components/tbl_sales.php'); ?>
                <?php endif; ?>
                <?php if ($_POST['sis_module'] == 2): ?>
                    <?php include('components/tbl_expenses.php'); ?>
                <?php endif; ?>
                <?php if ($_POST['sis_module'] == 3): ?>
                    <?php include('components/tbl_budgets.php'); ?>
                <?php endif; ?>
                <?php if ($_POST['sis_module'] == 4): ?>
                    <?php include('components/tbl_os.php'); ?>
                <?php endif; ?>
                <?php if ($_POST['sis_module'] == 5): ?>
                    <?php include('components/tbl_schedules.php'); ?>
                <?php endif; ?>
                <?php if ($_POST['sis_module'] == 6): ?>
                    <?php include('components/tbl_items_control.php'); ?>
                <?php endif; ?>
                <?php if ($_POST['sis_module'] == 7): ?>
                    <?php include('components/tbl_time_sheets.php'); ?>
                <?php endif; ?>
                <?php if ($_POST['sis_module'] == 8): ?>
                    <?php include('components/tbl_prospects.php'); ?>
                <?php endif; ?>
                <?php if ($_POST['sis_module'] == 9): ?>
                    <?php include('components/tbl_tasks.php'); ?>
                <?php endif; ?>
                <?php if ($_POST['sis_module'] == 10): ?>
                    <?php include('components/tbl_purchases.php'); ?>
                <?php endif; ?>
                <?php if ($_POST['sis_module'] == 11): ?>
                    <?php include('components/tbl_financial.php'); ?>
                <?php endif; ?>
                <?php if ($_POST['sis_module'] == 12): ?>
                    <?php include('components/tbl_users.php'); ?>
                <?php endif; ?>
                <?php if ($_POST['sis_module'] == 13): ?>
                    <?php include('components/tbl_logs.php'); ?>
                <?php endif; ?>
                <?php if ($_POST['sis_module'] == 14): ?>
                    <?php include('components/tbl_support.php'); ?>
                <?php endif; ?>
            <?php endif; ?>
        </div>
    </div>
    <script>
        async function openModalDetails(id) {
            $("#modalReportDetailsTitle").html('<i class="fa fa-info-circle pr-2"></i> <?php echo $this->view->modalTitle; ?>');
            $("#modalReportDetailsLoader").show();
            $("#modalReportDetails").modal('show');     
            
            await $.ajax({
                type: 'post',
                url: "<?php echo baseUrl . '' . $this->view->module; ?>/detalhes",
                data: {
                    id:id,
                    modal: true,
                    target: '<?php echo $this->getTarget(); ?>'
                },
                async: true
            }).done(function(data) {
                $("#modalReportDetailsResult").html(data);
                $("#modalReportDetailsLoader").hide();
            }).fail(function() {
                showInternalErrorAlert();
                $("#modalReportDetailsLoader").hide();
            });
        }

        async function openModDetails(id, mod, month = null) {
            $("#modalReportDetailsLoader").show();
            
            $("#baseLoader").show();
            await $.ajax({
                type: 'post',
                url: "<?php echo baseUrl; ?>"+mod+"/detalhes",
                data: {
                    id:id,
                    month: month,
                    target: '<?php echo $this->getTarget(); ?>'
                },
                async: true
            }).done(function(data) {
                $("#sis_content").html(data);
                $("#baseLoader").fadeOut();
                $("#modalReportDetails").modal('hide');  
            }).fail(function() {
                showInternalErrorAlert();
                $("#baseLoader").fadeOut();
            });
        }
    </script>
<?php endif; ?>